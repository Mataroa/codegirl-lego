var legra=function(){"use strict";const t=[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],e=[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872];function n(t,e){const n=e(t),o=n[0]*n[0]+n[1]*n[1];return Math.sqrt(o)}class o{constructor(t,e,n,o){this.points=[],this.dpoints=[],this._lut=[],this.order=3,this.points.push(t,e,n),o&&this.points.push(o),this.order=this.points.length-1,this.update()}update(){this._lut=[],this.dpoints=function(t){const e=[];for(let n=t,o=n.length,i=o-1;o>1;o--,i--){const t=[];let o=[0,0];for(let e=0;e<i;e++)o=[i*(n[e+1][0]-n[e][0]),i*(n[e+1][1]-n[e][1])],t.push(o);e.push(t),n=t}return e}(this.points)}length(){return function(o){let i=0;const s=t.length;for(let h=0;h<s;h++){i+=e[h]*n(.5*t[h]+.5,o)}return.5*i}(this.derivative.bind(this))}derivative(t){const e=1-t;let n=0,o=0,i=0,s=this.dpoints[0];return 2===this.order?(s=[s[0],s[1],[0,0]],n=e,o=t):3===this.order&&(n=e*e,o=e*t*2,i=t*t),[n*s[0][0]+o*s[1][0]+i*s[2][0],n*s[0][1]+o*s[1][1]+i*s[2][1]]}getLUT(t=100){if(!t)return[];if(this._lut.length===t)return this._lut;this._lut=[],t--;for(let e=0;e<=t;e++)this._lut.push(this.compute(e/t));return this._lut}compute(t){return function(t,e){if(0===t)return e[0];const n=e.length-1;if(1===t)return e[n];let o=e;const i=1-t;if(0===n)return e[0];if(1===n){return[i*o[0][0]+t*o[1][0],i*o[0][1]+t*o[1][1]]}if(n<4){const e=i*i,s=t*t;let h=0,r=0,a=0,l=0;return 2===n?(o=[o[0],o[1],o[2],[0,0]],r=e,a=i*t*2,l=s):3===n&&(r=e*i,a=e*t*3,l=i*s*3,h=t*s),[r*o[0][0]+a*o[1][0]+l*o[2][0]+h*o[3][0],r*o[0][1]+a*o[1][1]+l*o[2][1]+h*o[3][1]]}const s=JSON.parse(JSON.stringify(e));for(;s.length>1;){for(let e=0;e<s.length-1;e++)s[e]=[s[e][0]+(s[e+1][0]-s[e][0])*t,s[e][1]+(s[e+1][1]-s[e][1])*t];s.splice(s.length-1,1)}return s[0]}(t,this.points)}}const i=new Map;function s(t){const e=`${t.r}, ${t.g}, ${t.b}`;if(i.has(e))return i.get(e);let[n,o,s]=[t.r/255,t.g/255,t.b/255];n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;let h=(.4124*n+.3576*o+.1805*s)/.95047,r=(.2126*n+.7152*o+.0722*s)/1,a=(.0193*n+.1192*o+.9505*s)/1.08883;h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116;const l={l:116*r-16,a:500*(h-r),b:200*(r-a)};return i.set(e,l),l}function h(t,e){if(e.length){const n=e.map(e=>({diff:function(t,e){const n=s(t),o=s(e);return Math.sqrt(Math.pow(o.l-n.l,2)+Math.pow(o.a-n.a,2)+Math.pow(o.b-n.b,2))}(t,e),color:e}));return n.sort((t,e)=>t.diff-e.diff),console.log(t,n[0]),n[0].color}return t}const r=new Map;function a(t,e,n,o){const{brickSize:i,color:s}=o;t.save(),t.fillStyle=s,t.shadowColor="rgba(0,0,0,0.5)",t.shadowBlur=3,t.shadowOffsetX=1,t.shadowOffsetY=1,t.beginPath(),t.rect(e,n,i,i),t.fill(),t.beginPath(),t.arc(e+i/2,n+i/2,function(t){if(r.has(t))return r.get(t);const e=Math.min(24,.5*t/2);return r.set(t,e),e}(i),0,2*Math.PI),t.fill(),t.restore()}function l(t,e,n,o){const i=o.brickSize;a(n,t*i,e*i,o)}function c(t,e,n,o=!1){o&&t.sort((t,e)=>t[0]===e[0]?t[1]<e[1]?-1:t[1]>e[1]?1:0:t[0]<e[0]?-1:t[0]>e[0]?1:0);const i=n.brickSize;t.forEach(t=>{a(e,t[0]*i,t[1]*i,n)})}function f(t,e,n,o,i=new Set){const s=[],h=t=>{const e=t.join(",");i.has(e)||(i.add(e),s.push(t))};if(t===n){const n=Math.min(e,o),i=Math.max(e,o);for(let e=n;e<=i;e++)h([t,e])}else{const i=o-e,s=n-t,r=i/s,a=e-r*t;if(Math.abs(s)>=Math.abs(i)){const e=Math.min(t,n),o=Math.max(t,n);for(let t=e;t<=o;t++){h([t,Math.round(r*t+a)])}}else{const t=Math.min(e,o),n=Math.max(e,o);for(let e=t;e<=n;e++){h([Math.round((e-a)/r),e])}}}return s}function u(t,e=new Set){let n=[];for(let o=0;o<t.length-1;o++){const[i,s]=t[o],[h,r]=t[o+1],a=f(i,s,h,r,e);n=[...n,...a]}return n}function d(t,e,n,o,i,s,h=!1){if(s.filled||h)for(let h=0;h<n;h++)for(let n=0;n<o;n++)l(t+h,e+n,i,s);else n>0&&o>0&&g([[t,e],[t+n-1,e],[t+n-1,e+o-1],[t,e+o-1],[t,e]],i,s)}function p(t,e,n,o,i,s){c(f(t,e,n,o),i,s)}function g(t,e,n){c(u(t),e,n,!0)}function M(t,e,n,o,i,s){let h=0,r=o;const a=n*n,l=o*o,f=-(a/4+n%2+l),u=-(l/4+o%2+a),p=-(l/4+o%2);let g=-a*r,M=2*l*h,x=-2*a*r;const m=2*l,b=2*a,w=()=>{h++,M+=m,g+=M},y=()=>{r--,x+=b,g+=x};if(s.filled){const c=[];let M=h,x=r,m=1,b=1;const O=(t,e,n,o)=>{o<0&&(e+=o+1,o=Math.abs(o)),c.push({x:t,y:e,width:n,height:o})};if(0===o)O(t-1,e,2*n+1,1);else{for(;r>=0&&h<=n;)g+l*h<=f||g+a*r<=p?(1===b||(2*x+1>2*(b-1)?(O(t-M,e-x,m,b-1),O(t-M,e+x,m,1-b),x-=b-1,b=1):(O(t-M,e-x,m,2*x+1),x-=x,b=1)),w(),M++,m+=2):g-a*r>u?(y(),b++):(2*x+1>2*b?(O(t-M,e-x,m,b),O(t-M,e+x,m,-b)):O(t-M,e-x,m,2*x+1),w(),y(),M++,m+=2,x-=b,b=1);x>b?(O(t-M,e-x,m,b),O(t-M,e+x+1,m,-b)):O(t-M,e-x,m,2*x+1)}c.forEach(t=>{t.height<0&&(t.y+=t.height+1,t.height=Math.abs(t.height))}),c.sort((t,e)=>t.y-e.y),c.forEach(t=>d(t.x,t.y,t.width,t.height,i,s,!0))}else{const o=[];for(;r>=0&&h<=n;)o.push([t+h,e+r]),0===h&&0===r||o.push([t-h,e-r]),0!==h&&0!==r&&(o.push([t+h,e-r]),o.push([t-h,e+r])),g+l*h<=f||g+a*r<=p?w():g-a*r>u?y():(w(),y());c(o,i,s,!0)}}function x(t,e,n){if(0===t.length)return;if(1===t.length)return void l(t[0][0],t[0][1],e,n);if(2===t.length){const[[o,i],[s,h]]=t;return void p(o,i,s,h,e,n)}const o=[...t];if(o[0].join(",")!==o[o.length-1].join(",")&&o.push([o[0][0],o[0][1]]),n.filled){const t=new Set;let i=u(o,t);const s=[];for(let t=0;t<o.length-1;t++){const e=o[t],n=o[t+1];if(e[1]!==n[1]){const t=Math.min(e[1],n[1]);s.push({ymin:t,ymax:Math.max(e[1],n[1]),x:t===e[1]?e[0]:n[0],islope:(n[0]-e[0])/(n[1]-e[1])})}}s.sort((t,e)=>t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax));let h=[],r=s[0].ymin;for(;h.length||s.length;){if(s.length){let t=-1;for(let e=0;e<s.length&&!(s[e].ymin>r);e++)t=e;s.splice(0,t+1).forEach(t=>{h.push({s:r,edge:t})})}if(h=h.filter(t=>t.edge.ymax!==r),h.sort((t,e)=>t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x)),h.length>1)for(let e=0;e<h.length;e+=2){const n=e+1;if(n>=h.length)break;const o=h[e].edge,s=h[n].edge;i=i.concat(f(Math.round(o.x),r,Math.round(s.x),r,t))}r++,h.forEach(t=>{t.edge.x=t.edge.x+t.edge.islope})}c(i,e,n,!0)}else g(o,e,n)}return class{constructor(t,e=24,n){this.defaultOptions={brickSize:24,color:"#2196F3",filled:!1,palette:[]},this.ctx=t,this.defaultOptions.brickSize=e,n&&(n.color&&(this.defaultOptions.color=n.color),"boolean"==typeof n.filled&&(this.defaultOptions.filled=n.filled),n.palette&&(this.defaultOptions.palette=n.palette))}opt(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}line(t,e,n,o,i){p(t,e,n,o,this.ctx,this.opt(i))}linearPath(t,e){g(t,this.ctx,this.opt(e))}rectangle(t,e,n,o,i){d(t,e,n,o,this.ctx,this.opt(i))}circle(t,e,n,o){!function(t,e,n,o,i){M(t,e,n,n,o,i)}(t,e,n,this.ctx,this.opt(o))}ellipse(t,e,n,o,i){M(t,e,n,o,this.ctx,this.opt(i))}polygon(t,e){x(t,this.ctx,this.opt(e))}arc(t,e,n,o,i,s,h,r){!function(t,e,n,o,i,s,h,r,a){let l=Math.min(i,s),c=Math.max(i,s);if(l===c)return;if(n<=0||o<=0)return;c-l>2*Math.PI&&(l=0,c=2*Math.PI);const f=Math.round(2*Math.sqrt((n*n+o*o)/2)*(c-l)),u=(c-l)/f,d=new Set,p=[];for(let i=0;i<=f;i++){const s=l+i*u,h=Math.cos(s),r=Math.sin(s),a=n*o/Math.sqrt(o*o*h*h+n*n*r*r),c=[t+Math.round(a*h),e+Math.round(a*r)],f=c.join(",");d.has(f)||(d.add(f),p.push(c))}if(h){const n=[t,e],o=n.join(",");d.has(o)||(d.add(o),p.push(n)),x(p,r,a)}else g(p,r,a)}(t,e,n,o,i,s,h,this.ctx,this.opt(r))}bezierCurve(t,e,n,i,s,h,r,a,l){!function(t,e,n,i,s,h,r,a,l,c){const f=new o([t,e],[n,i],[s,h],[r,a]),u=f.getLUT(f.length()).map(t=>[Math.round(t[0]),Math.round(t[1])]);u.push([r,a]),c.filled?x(u,l,c):g(u,l,c)}(t,e,n,i,s,h,r,a,this.ctx,this.opt(l))}quadraticCurve(t,e,n,i,s,h,r){!function(t,e,n,i,s,h,r,a){const l=new o([t,e],[n,i],[s,h]),c=l.getLUT(l.length()).map(t=>[Math.round(t[0]),Math.round(t[1])]);c.push([s,h]),a.filled?x(c,r,a):g(c,r,a)}(t,e,n,i,s,h,this.ctx,this.opt(r))}drawImage(t,e,n,o,i,s){!function(t,e,n,o,i,s,r){const a=e.brickSize;s||(s=[0,0]),r||(r=[n.width,n.height]),i||(i=[Math.round(r[0]/a),Math.round(r[1]/a)]);const[c,f]=i,u="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(c,f):document.createElement("canvas");u.width=c,u.height=f;const d=u.getContext("2d");d.drawImage(n,s[0],s[1],r[0],r[1],0,0,i[0],i[1]);const p=d.getImageData(0,0,c,f),g=new Map;for(let n=0;n<f;n++)for(let i=0;i<c;i++){let s={r:p.data[n*c*4+4*i],g:p.data[n*c*4+4*i+1],b:p.data[n*c*4+4*i+2]};if(e.palette&&e.palette.length){const t=`${s.r},${s.g},${s.b}`;if(g.has(t))s=g.get(t);else{const n=h(s,e.palette);g.set(t,n),s=n}}const r={brickSize:a,color:`rgb(${s.r}, ${s.g}, ${s.b})`,filled:!1,palette:[]};l(o[0]+i,o[1]+n,t,r)}}(this.ctx,this.opt(s),t,e,n,o,i)}}}();